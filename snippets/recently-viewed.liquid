<script>
    // 商品の詳細ページから商品IDを取得する関数。実際のIDの取得方法は実装による。
    function getProductId() {
     // recently-viewed-products要素からproduct-id属性を取得
      return document.querySelector("recently-viewed-products").getAttribute("product-id");
    }
    
    // ローカルストレージに商品IDを保存する関数
    function storeProduct(id) {
      // ローカルストレージから現在のリストを取得
      let items = JSON.parse(localStorage.getItem("recently-viewed-products") || "[]");
    
      // 新しい商品IDをリストの先頭に追加
      items.unshift(id);
    
      // 重複する商品IDを削除
      items = [...new Set(items)];
    
      // 最新の4つの商品だけを保存するようにリストを制限（オプション）
      items = items.slice(0, 4);
    
      // 更新したリストをローカルストレージに保存
      localStorage.setItem("recently-viewed-products", JSON.stringify(items));
    }
    
    // 商品の詳細ページが読み込まれたときに実行
    window.onload = function() {
      // 商品IDを取得
      const productId = getProductId();
    
      // ローカルストレージに商品IDを保存
      storeProduct(productId);
    };
    </script>
    